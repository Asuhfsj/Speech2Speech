<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speech to Speech using Moonshine and Kokoro</title>
    <link id="favicon" rel="icon" href="./img/favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/conversation.css">
    <link rel="stylesheet" href="./css/tabs.css">
</head>

<body>
    <h1>Speech to Speech using Moonshine and Kokoro</h1>

    <div class="tabs">
        <div class="tab-buttons">
            <button class="tab-button active" data-tab="conversation">Conversation</button>
            <button class="tab-button" data-tab="settings">Settings</button>
            <button class="tab-button" data-tab="credits">Credits</button>
        </div>

        <div id="conversation" class="tab-content active">
            <div class="container">
                <div class="recorder-container">
                    <h2>Record Your Voice</h2>
                    <div class="status" id="recordingStatus">Click "Start Recording" to begin</div>
                    <div id="recordingIndicator" style="display: none;">
                        <span class="recording-indicator"></span>
                        <span>Recording...</span>
                        <div class="timer" id="recordingTimer">00:00</div>
                    </div>
                    <button id="toggleRecording">Start Recording</button>
                </div>

                <div class="transcription-container">
                    <h2>Transcription</h2>
                    <div class="status" id="transcriptionStatus">No transcription available</div>
                    <div id="transcriptionResult"></div>
                </div>

                <div class="playback-container" style="display: none">
                    <h2>Playback</h2>
                    <div class="status" id="playbackStatus">No recording available</div>
                    <audio id="audioPlayback" controls style="width: 100%; display: none;"></audio>
                </div>
            </div>
        </div>

        <div id="settings" class="tab-content">
            <div class="settings-container">
                <div class="setting-group">
                    <label class="setting-label" for="serverUrl">Chat Inference Server URL:</label>
                    <input type="text" id="serverUrl" class="setting-input"
                        value="http://localhost:8080/v1/chat/completions">
                </div>
                <div class="setting-group">
                    <label class="setting-label" for="systemPrompt">System Prompt:</label>
                    <textarea id="systemPrompt" class="setting-input">You are a helpful AI agent.</textarea>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="voiceSelect">Voice:</label>
                    <select id="voiceSelect" class="setting-input">
                        <option value="af_heart">Heart (Female)</option>
                        <option value="af_bella">Bella (Female)</option>
                        <option value="af_nicole">Nicole (Female)</option>
                        <option value="am_onyx">Onyx (Male)</option>
                        <option value="am_vampire">Vampire (Male)</option>
                        <option value="am_walle">Wall-E (Male)</option>
                    </select>
                </div>
            </div>
        </div>
        <div id="credits" class="tab-content">
            <div class="credits-container">
                <h2>Credits</h2>
                <p>This project uses the following open source projects:</p>
                <div class="credit-item">
                    <h3>Speech2Speech</h3>
                    <p>Main project source code repository</p>
                    <a href="https://github.com/rhulha/Speech2Speech" target="_blank">https://github.com/rhulha/Speech2Speech</a>
                </div>
                <div class="credit-item">
                    <h3>Moonshine</h3>
                    <p>Speech recognition model by Useful Sensors</p>
                    <a href="https://github.com/usefulsensors/moonshine" target="_blank">https://github.com/usefulsensors/moonshine</a>
                </div>
                <div class="credit-item">
                    <h3>Kokoro</h3>
                    <p>Text-to-speech synthesis engine</p>
                    <a href="https://github.com/hexgrad/kokoro" target="_blank">https://github.com/hexgrad/kokoro</a>
                </div>
            </div>
        </div>
    </div>

    <script src="./js/ui.js" type="module"></script>
</body>

</html>